<!-- Profile -->
<div class="profile">
    <div>
        <!-- Profile Banner -->
        <div class="profile__banner">

            <!-- Profile Banner Top -->
            <div class="profile__banner-detail">
                <!-- Avatar Wrapper -->
                <div class="dt-avatar-wrapper">
                    <avatar img_class="dt-avatar size-90 mr-sm-4" src="{{profile.profilePicture}}" firstName="{{profile.firstName}}"></avatar>

                    <!-- Info -->
                    <div class="dt-avatar-info">
                        <span class="dt-avatar-name display-4 mb-2 font-weight-light">{{profile.firstName + ' ' + profile.lastName}}</span>
                        <span class="f-16">{{profile.city + ', ' + profile.provinceState}}</span>
                        
                        <div class="mb-5" style="margin-top:10px;">

                            <div *ngIf="profile.isRealtor" class="d-flex mb-1">
                                <div class="rating-container flex-column">
                                    <div *ngIf="!(ratings.length === 0)" style="display:flex;">
                                        <div *ngIf="rating < 1">☆</div>
                                        <div *ngIf="rating >= 1">★</div>
                                        
                                        <div *ngIf="rating < 2">☆</div>
                                        <div *ngIf="rating >= 2">★</div>
                                        
                                        <div *ngIf="rating < 3">☆</div>
                                        <div *ngIf="rating >= 3">★</div>
                                        
                                        <div *ngIf="rating < 4">☆</div>
                                        <div *ngIf="rating >= 4">★</div>
                                        
                                        <div *ngIf="rating < 5">☆</div>
                                        <div *ngIf="rating >= 5">★</div>
                                    </div>
                                    
                                    <div class="ratings-review f-16" style="color: #e6e6e6;">
                                        <span class="count-number" style="color: #e6e6e6;">{{ratings.length}}</span> Reviews
                                    </div>
                                </div>
                            </div>

                            <a (click)="profilePicEdit()" class="no-arrow btn-hover" style="float: right; margin-bottom: 20px;" *ngIf="isCurrentUser">
                                <gx-icon name="settings" size="xl" class="mr-2"></gx-icon>
                                <span class="d-none d-sm-inline-block">Edit</span>
                            </a>
                        </div>
                    </div>
                    <!-- /info -->
                </div>
                <!-- /avatar wrapper -->

                <div class="ml-sm-auto side-bar-following">
                    
                    <button *ngIf="!isCurrentUser && currentUser !== null" type="button" class="btn btn-outline-secondary mb-2" [ngClass]="profile.following ? 'toggled_btn_follow' : ''"
                            (click)="follow()" aria-pressed="false"
                            autocomplete="off">
                            <div *ngIf="profile.following">Following</div>
                            <div *ngIf="!profile.following">Follow</div>
                    </button>
                    <!-- List -->
                    <ul class="dt-list dt-list-bordered dt-list-col-4">
                        <!-- List Item -->
                        <li class="dt-list__item text-center" style="padding-right: 70px;">
                            <span class="h4 font-weight-500 mb-0 text-white">{{profile.followers}}</span>
                            <span class="d-block f-12">Followers</span>
                        </li>
                        <li class="dt-list__item text-center" style="padding-right: 70px;">
                            <span class="h4 font-weight-500 mb-0 text-white">{{following.length}}</span>
                            <span class="d-block f-12">Following</span>
                        </li>
                        <!-- /list item -->
                    </ul>
                    <!-- /list -->
                </div>
            </div>
            <!-- /profile banner top -->

            <!-- Profile Banner Bottom -->
            <div class="profile__banner-navigation">

                <!-- Navbar -->
                <ul class="navbar-nav">

                    <!-- Nav Item -->
                    <li *ngIf="profile.isRealtor" class="nav-item active">
                        <a class="nav-link button-about-switch btn-hover" [style]="aboutButton == 'following' ? 'color: #e6e6e6;' : 'color: white;'" (click)="aboutButton = 'about'">About</a>
                    </li>
                    <!-- /nav item -->

                    <!-- Nav Item -->
                    <li class="nav-item">
                        <a class="nav-link button-about-switch btn-hover" [style]="aboutButton == 'following' ? 'color: white;' : 'color: #e6e6e6;'" (click)="aboutButton = 'following'">Following
                            <small class="text-light-gray">{{following.length}}</small>
                        </a>
                    </li>
                    <!-- /nav item -->
                </ul>
                <!-- /navbar -->
            </div>
            <!-- /profile banner bottom -->

        </div>
        <!-- /profile banner -->
    </div>
    <div>
        <!-- Profile Content -->
        <div class="profile-content">

            <!-- Grid -->
            <div class="row">

                <!-- Grid Item -->
                <div class="col-xl-4 order-xl-2">

                    <!-- Grid -->
                    <div class="row">

                        <!-- Grid Item -->
                        <div class="col-xl-12 col-md-12 col-12 order-xl-1">
                            <!-- Card -->
                            <gx-card [fullHeight]="true" card-title="Contact" header-class="pt-6">
                                <div *ngIf="!editContact">
                                    <!-- Media -->
                                    <gx-media-icon-card class="mb-5" label="Mail">
                                      <gx-icon name= "mail" size="xl" class="mr-5" icon></gx-icon>
                                      <a href="javascript:void(0)" text>{{profile.email}}</a>
                                    </gx-media-icon-card>
                                    <!-- /media -->

                                    <!-- Media -->
                                    <gx-media-icon-card class="mb-5" label="Web Page" *ngIf="profile.website">
                                      <gx-icon name="link" size="xl" class="mr-5" icon></gx-icon>
                                      <a href="{{profile.website}}" target="_blank" text>{{profile.website}}</a>
                                    </gx-media-icon-card>
                                    <!-- /media -->
                                  
                                    <!-- Media -->
                                    <gx-media-icon-card class="mb-5" label="Cell Phone" *ngIf="profile.phoneNumberCell">
                                      <gx-icon name="phone-o" size="xl" class="mr-5" icon></gx-icon>
                                      <span class="h5" text>{{formatPhone(profile.phoneNumberCell)}}</span>
                                    </gx-media-icon-card>
                                    <!-- /media -->
                                  
                                    <!-- Media -->
                                    <gx-media-icon-card class="mb-5" label="Office Phone" *ngIf="profile.phoneNumberOffice">
                                      <gx-icon name="phone-o" size="xl" class="mr-5" icon></gx-icon>
                                      <span class="h5" text>{{formatPhone(profile.phoneNumberOffice)}}</span>
                                    </gx-media-icon-card>
                                    <!-- /media -->
                                  
                                    <div *ngIf="!editContact">
                                      <ul class="dt-list dt-list-sm dt-list-cm-0 ml-auto" style="margin-top: 50px;">
                                        <li class="dt-list__item" *ngIf="profile.facebook">
                                          <!-- Fab Button -->
                                          <a href="{{profile.facebook}}" target="_blank" class="btn btn-outline-primary dt-fab-btn size-30">
                                            <gx-icon name="facebook" size="xl"></gx-icon>
                                          </a>
                                          <!-- /fab button -->
                                        </li>
                                  
                                        <li class="dt-list__item" *ngIf="profile.linkedin">
                                          <!-- Fab Button -->
                                          <a href="{{profile.linkedin}}" target="_blank" class="btn btn-outline-primary dt-fab-btn size-30">
                                            <gx-icon name="linkedin" size="xl"></gx-icon>
                                          </a>
                                          <!-- /fab button -->
                                        </li>
                                  
                                        <li class="dt-list__item" *ngIf="profile.twitter">
                                          <!-- Fab Button -->
                                          <a href="{{profile.twitter}}" target="_blank" class="btn btn-outline-primary dt-fab-btn size-30">
                                            <gx-icon name="twitter" size="xl"></gx-icon>
                                          </a>
                                          <!-- /fab button -->
                                        </li>
                                  
                                        <li class="dt-list__item" *ngIf="profile.instagram">
                                          <!-- Fab Button -->
                                          <a href="{{profile.instagram}}" target="_blank" class="btn btn-outline-primary dt-fab-btn size-30">
                                            <gx-icon name="instagram" size="xl"></gx-icon>
                                          </a>
                                          <!-- /fab button -->
                                        </li>
                                      </ul>
                                  
                                      <a (click)="editContactInfo()" class="no-arrow btn-hover" style="float: right; margin-bottom: 20px;" *ngIf="isCurrentUser">
                                        <gx-icon name="settings" size="xl" class="mr-2"></gx-icon>
                                        <span class="d-none d-sm-inline-block">Edit</span>
                                      </a>
                                    </div>
                                </div>
                                <div [hidden]="!editContact">
                                    <form [formGroup]="contactForm" (ngSubmit)="onSubmitContact()">
                                        <div class="form-row form-spacing">
                                            <label class="col-md-1 col-sm-3 col-form-label text-sm-left">Email</label>
                                            <div class="col-md-12 col-sm-9">
                                                <input type="email" formControlName="email" class="form-control" placeholder="Email" [ngClass]="{ 'is-invalid': submittedContact && fc.email.errors }">
                                                <div *ngIf="submittedContact && fc.email.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fc.email.errors.required">* Email is required</div>
                                                    <div class="form-error" *ngIf="fc.email.errors.email">* Email must be a valid email</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div [hidden]="profile.isRealtor">
                                            <div class="form-row form-spacing">
                                                <label class="col-md-6 col-sm-6 col-form-label text-sm-left">First Name</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="firstName" class="form-control" placeholder="First Name">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-6 col-sm-6 col-form-label text-sm-left">Last Name</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="lastName" class="form-control" placeholder="Last Name">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-6 col-sm-6 col-form-label text-sm-left">City</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="city" class="form-control" id="normal-input-1" placeholder="City">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-6 col-sm-6 col-form-label text-sm-left" for="simple-select">Province</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <select class="form-control" formControlName="province" id="simple-select">
                                                        <option>Alberta</option>
                                                        <option>British Columbia</option>
                                                        <option>Manitoba</option>
                                                        <option>New Brunswick</option>
                                                        <option>Newfoundland and Labrador</option>
                                                        <option>Northwest Territories</option>
                                                        <option>Nova Scotia</option>
                                                        <option>Nunavut</option>
                                                        <option>Ontario</option>
                                                        <option>Prince Edward Island</option>
                                                        <option>Quebec</option>
                                                        <option>Saskachewan</option>
                                                        <option>Yukon</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-6 col-sm-6 col-form-label text-sm-left" for="normal-input-1">Profile Picture</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="file" id="profilePicContact" (change)="changedFileContact($event)" formControlName="profilePic" class="custom-file-input"  [ngClass]="{ 'is-invalid': submittedContact && fc.profilePic.errors }">
                                                    <label class="custom-file-label" for="file-field">Upload Picture Less than 2 MB</label>
                                                    <div *ngIf="submittedContact && fc.profilePic.errors" class="invalid-feedback">
                                                        <div class="form-error" *ngIf="fc.profilePic.errors.pngjpgValidation">* File must be png or jpg</div>
                                                        <div class="form-error" *ngIf="fc.profilePic.errors.sizeValidation">* File must be between 100KB and 2MB</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-bottom: 10px; display: block; margin-left: auto; margin-right: auto; width: 50%;">
                                                <img id="profilePicLoadedContact" style="display: none;" class="dt-avatar size-100 mr-6 mb-6 mb-sm-0">
                                            </div>
                                        </div>
                                        <div [hidden]="!profile.isRealtor">
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Website</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="website" placeholder="Website" id="website-value" class="form-control"  [ngClass]="{ 'is-invalid': submittedContact && fc.website.errors }">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Cell</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="cell" class="form-control" id="cell-value" (ngModelChange)="changePhone('cell')" placeholder="Cell Phone" [ngClass]="{ 'is-invalid': submittedContact && fc.cell.errors }">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Office</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="office" class="form-control" id="office-value" (ngModelChange)="changePhone('office')" placeholder="Office Phone" [ngClass]="{ 'is-invalid': submittedContact && fc.office.errors }">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Facebook</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="facebook" class="form-control" id="facebook-value" placeholder="Facebook" [ngClass]="{ 'is-invalid': submittedContact && fc.facebook.errors }">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Linkedin</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="linkedin" class="form-control" id="linkedin-value" placeholder="Linkedin" [ngClass]="{ 'is-invalid': submittedContact && fc.linkedin.errors }">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Twitter</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="twitter" class="form-control" id="twitter-value" placeholder="Twitter" [ngClass]="{ 'is-invalid': submittedContact && fc.twitter.errors }">
                                                </div>
                                            </div>
                                            <div class="form-row form-spacing">
                                                <label class="col-md-1 col-sm-3 col-form-label text-sm-right">Instagram</label>
                                                <div class="col-md-12 col-sm-9">
                                                    <input type="text" formControlName="instagram" class="form-control" id="instagram-value" placeholder="Instagram" [ngClass]="{ 'is-invalid': submittedContact && fc.instagram.errors }">
                                                </div>
                                            </div>
                                        </div>
                                        <button type="button" [disabled]="loading" (click)="cancelContact()" style="margin-right: 10px; margin-top:15px; margin-bottom: 15px;" class="btn btn-outline-primary text-uppercase ml-auto">Cancel</button>
                                        <button type="submit" [disabled]="loading" style="margin-right: 10px; margin-top:15px; margin-bottom: 15px;" class="btn btn-primary text-uppercase">Submit</button>
                                    </form>
                                  </div>
                            </gx-card>
                            <!-- /card -->
                        </div>
                        <!-- /grid item -->

                    </div>
                    <!-- /grid -->

                </div>
                <!-- /grid item -->

                <div class="col-xl-8 order-xl-1">
                    <div [hidden]="!((aboutButton === 'about' || aboutButton === undefined) && profile.isRealtor)">
                        <tabs-about-profile title="About" class="card">
                            <tab-about-profile tabTitle="Description">
                                <div [hidden]="!editDescription">
                                    <form [formGroup]="descriptionForm" (ngSubmit)="onSubmitDescription()">
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">First Name</label>
                                            <div class="col-md-10 col-sm-9">
                                                <input type="text" formControlName="firstName" placeholder="First Name" class="form-control" [ngClass]="{ 'is-invalid': submittedDescription && fd.firstName.errors }" />
                                                <div *ngIf="submittedDescription && fd.firstName.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fd.firstName.errors.required">* First Name is required</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">Last Name</label>
                                            <div class="col-md-10 col-sm-9">
                                                <input type="text" formControlName="lastName" placeholder="Last Name" class="form-control" [ngClass]="{ 'is-invalid': submittedDescription && fd.lastName.errors }" />
                                                <div *ngIf="submittedDescription && fd.lastName.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fd.lastName.errors.required">* Last Name is required</div>
                                                </div>
                                            </div>
                                        </div>
                                    
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">Profile Picture</label>
                                            <div class="col-md-10 col-sm-9">
                                                <input type="file" id="profilePic" (change)="changedFile($event)" formControlName="profilePic" class="custom-file-input"  [ngClass]="{ 'is-invalid': submittedDescription && fd.profilePic.errors }">
                                                <label class="custom-file-label" for="file-field">Upload Picture Less than 2 MB</label>
                                                <div *ngIf="submittedDescription && fd.profilePic.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fd.profilePic.errors.pngjpgValidation">* File must be png or jpg</div>
                                                    <div class="form-error" *ngIf="fd.profilePic.errors.sizeValidation">* File must be between 100KB and 2MB</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-bottom: 10px; display: block; margin-left: auto; margin-right: auto; width: 50%;">
                                            <img id="profilePicLoaded" style="display: none;" class="dt-avatar size-100 mr-6 mb-6 mb-sm-0">
                                        </div>

                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">About</label>
                                            <div class="col-md-10 col-sm-9">
                                                <textarea formControlName="about" class="form-control" id="text-area-1" rows="3" placeholder="Textarea" [ngClass]="{ 'is-invalid': submittedDescription && fd.about.errors }"></textarea>
                                                <div *ngIf="submittedDescription && fd.about.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fd.about.errors.required">* About section is required</div>
                                                </div>
                                            </div>
                                        </div>

                                        <button type="button" [disabled]="loading" (click)="cancelDescription()" style="margin-right: 10px; margin-top:15px; margin-bottom: 15px;" class="btn btn-outline-primary text-uppercase ml-auto">Cancel</button>
                                        <button type="submit" [disabled]="loading" style="margin-right: 10px; margin-top:15px; margin-bottom: 15px;" class="btn btn-primary text-uppercase">Submit</button>
                                    </form>
                                </div>
                                <div *ngIf="!editDescription">
                                    <div style="margin-bottom: 40px;">{{profile.about}}</div>
                                    <a (click)="editDescription = true" class="no-arrow btn-hover" style="float: right; margin-bottom: 20px;" *ngIf="isCurrentUser">
                                        <gx-icon name="settings" size="xl" class="mr-2"></gx-icon>
                                        <span class="d-none d-sm-inline-block">Edit</span>
                                    </a>
                                </div>
                            </tab-about-profile>
                            <tab-about-profile tabTitle="Overview">
                                <div *ngIf="editPersonal">
                                    <form [formGroup]="overviewForm" (ngSubmit)="onSubmitOverview()">
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">Brokerage</label>
                                            <div class="col-md-10 col-sm-9">
                                                <input type="text" formControlName="brokerage" class="form-control" id="normal-input-1" placeholder="Brokerage">
                                            </div>
                                        </div>
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">Business Address</label>
                                            <div class="col-md-10 col-sm-9">
                                                <input type="text" formControlName="address" class="form-control" id="normal-input-1" placeholder="Business Address">
                                            </div>
                                        </div>
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="normal-input-1">City</label>
                                            <div class="col-md-10 col-sm-9">
                                                <input type="text" formControlName="city" class="form-control" id="normal-input-1" placeholder="City" [ngClass]="{ 'is-invalid': submittedOverview && fo.city.errors }">
                                                <div *ngIf="submittedOverview && fo.city.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fo.city.errors.required">* City is required</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row form-spacing">
                                            <label class="col-md-2 col-sm-3 col-form-label text-sm-right" for="simple-select">Province</label>
                                
                                            <div class="col-md-10 col-sm-9">
                                                <select class="form-control" formControlName="province" id="simple-select" [ngClass]="{ 'is-invalid': submittedOverview && fo.province.errors }">
                                                    <option>Alberta</option>
                                                    <option>British Columbia</option>
                                                    <option>Manitoba</option>
                                                    <option>New Brunswick</option>
                                                    <option>Newfoundland and Labrador</option>
                                                    <option>Northwest Territories</option>
                                                    <option>Nova Scotia</option>
                                                    <option>Nunavut</option>
                                                    <option>Ontario</option>
                                                    <option>Prince Edward Island</option>
                                                    <option>Quebec</option>
                                                    <option>Saskachewan</option>
                                                    <option>Yukon</option>
                                                </select>
                                                <div *ngIf="submittedOverview && fo.province.errors" class="invalid-feedback">
                                                    <div class="form-error" *ngIf="fo.province.errors.required">* Province is required</div>
                                                </div>
                                            </div>
                                            <button type="button" [disabled]="loading" (click)="cancelOverview()" style="margin-right: 10px; margin-top:15px; margin-bottom: 15px;" class="btn btn-outline-primary text-uppercase ml-auto">Cancel</button>
                                            <button type="submit" [disabled]="loading" style="margin-right: 10px; margin-top:15px; margin-bottom: 15px;" class="btn btn-primary text-uppercase">Submit</button>
                                        </div>
                                    </form>
                                </div>
                                <div *ngIf="!editPersonal">
                                    <!-- List -->
                                    <ul class="dt-list dt-list-col-4">
                                        <!-- List Item -->
                                        <li class="dt-list__item" *ngIf="profile.brokerage">
                                            <!-- Media -->
                                            <gx-media-icon-card label="Brokerage">
                                                <gx-icon name="company" size="4x" class="mr-5 align-self-center text-yellow" icon></gx-icon>
                                                <p class="h5 mb-0" text>{{profile.brokerage}}</p>
                                            </gx-media-icon-card>
                                            <!-- /media -->
                                        </li>
                                        <!-- /list item -->
                    
                                        <!-- List Item -->
                                        <li class="dt-list__item">
                                            <!-- Media -->
                                            <gx-media-icon-card label="Office Location">
                                                <gx-icon name="home" size="4x" class="mr-5 align-self-center text-yellow" icon></gx-icon>
                                                <p class="h5 mb-0" text *ngIf="profile.address">{{profile.address}},</p>
                                                <p class="h5 mb-0" text>{{profile.city}},</p>
                                                <p class="h5 mb-0" text>{{profile.provinceState}}</p>
                                            </gx-media-icon-card>
                                            <!-- /media -->
                                        </li>
                                        <!-- /list item -->
                                    </ul>
                                    <!-- /list -->
                                    <a (click)="editPersonal = true" class="no-arrow btn-hover" style="float: right; margin-bottom: 20px;" *ngIf="isCurrentUser">
                                        <gx-icon name="settings" size="xl" class="mr-2"></gx-icon>
                                        <span class="d-none d-sm-inline-block">Edit</span>
                                    </a>
                                </div>
                            </tab-about-profile>
                            <tab-about-profile tabTitle="Reviews">
                                <div class="dt-card" *ngIf="!isCurrentUser && currentUser !== null">
                                    <card-body>
                                        <form [formGroup]="reviewForm" (ngSubmit)="onSubmitReview()">
                                            <!-- Media -->
                                            <div class="media">
                                                <avatar img_class="dt-avatar size-50 mr-2" src="{{currentUser.profilePicture}}" firstName="{{currentUser.firstName}}"></avatar>
                                
                                                <!-- Media Body -->
                                                <div class="media-body">
                                                    <!-- Text Area -->
                                                    <textarea formControlName="message" class="form-control border-0 shadow-none bg-focus" rows="3"
                                                            placeholder="Write a review" style="resize: none;"></textarea>
                                                    <!-- /text area -->
                                                </div>
                                                <!-- /media body -->
                                            </div>
                                            <!-- /media -->
                                
                                            <!-- Separator -->
                                            <hr>
                                            <!-- /separator -->
                                
                                            <div class="d-flex align-items-center">
                                                <div class="dt-attachment-btn border-0 d-inline-flex align-items-center overflow-hidden">
                                                    <span class="designation review-designation btn-hover" style="display:flex;">
                                                        <div class="rating" *ngIf="ratingValue < 1" (click)="rate(1)">☆</div>
                                                        <div class="rating" *ngIf="ratingValue >= 1" (click)="rate(1)">★</div>

                                                        <div class="rating" *ngIf="ratingValue < 2" (click)="rate(2)">☆</div>
                                                        <div class="rating" *ngIf="ratingValue >= 2" (click)="rate(2)">★</div>

                                                        <div class="rating" *ngIf="ratingValue < 3" (click)="rate(3)">☆</div>
                                                        <div class="rating" *ngIf="ratingValue >= 3" (click)="rate(3)">★</div>

                                                        <div class="rating" *ngIf="ratingValue < 4" (click)="rate(4)">☆</div>
                                                        <div class="rating" *ngIf="ratingValue >= 4" (click)="rate(4)">★</div>

                                                        <div class="rating" *ngIf="ratingValue < 5" (click)="rate(5)">☆</div>
                                                        <div class="rating" *ngIf="ratingValue >= 5" (click)="rate(5)">★</div>
                                                    </span>
                                                </div>
                                                <input type="hidden" formControlName="rating">
                                                <div *ngIf="submitted && f.rating.errors" style="color: red;">
                                                    <div class="form-error" *ngIf="f.rating.errors.required">* Please rate this realtor.</div>
                                                </div>
                                
                                                <button type="submit" [disabled]="loading" class="btn btn-primary text-uppercase ml-auto">Send</button>
                                            </div>
                                        </form>
                                    </card-body>
                                </div>
                                
                                <div *ngIf="ratings.length == 0" style="margin-bottom: 30px;">
                                    No Reviews Yet.
                                </div>
                                <div *ngFor="let review of ratings; index as j;">
                                    <div class="container row" [style]="j === (ratings.length - 1) ? 'margin-bottom: 10px;' : ''">
                                        <a href="portal/user/profile/{{review.personId}}"><avatar img_class="dt-avatar size-60 mr-6 mb-6 mb-sm-0" src="{{review.profilePicture}}" firstName="{{review.firstName}}"></avatar></a>
                                        
                                        <div class="dt-module__list-item-content" data-location="mail-detail.html">
                                            <div class="user-detail">
                                                <a href="portal/user/profile/{{review.personId}}"><span class="user-name">{{review.firstName + " " + review.lastName}}</span></a>
                                                <span class="dt-separator-v">&nbsp;</span>
                                                <span class="designation date-designation">{{review.datePosted | dateAgo}}</span>
                                                <span class="dt-separator-v">&nbsp;</span>
                                                <span class="designation review-designation" style="display:flex;">
                                                    <div *ngIf="review.rating < 1">☆</div>
                                                    <div *ngIf="review.rating >= 1">★</div>
                                                    
                                                    <div *ngIf="review.rating < 2">☆</div>
                                                    <div *ngIf="review.rating >= 2">★</div>
                                                    
                                                    <div *ngIf="review.rating < 3">☆</div>
                                                    <div *ngIf="review.rating >= 3">★</div>
                                                    
                                                    <div *ngIf="review.rating < 4">☆</div>
                                                    <div *ngIf="review.rating >= 4">★</div>
                                                    
                                                    <div *ngIf="review.rating < 5">☆</div>
                                                    <div *ngIf="review.rating >= 5">★</div>
                                                </span>
                                            </div>
                                            <p class="mb-0 text-light-gray text-truncate" style="white-space: break-spaces;">{{review.reviewMessage | htmlToPlainText | slice:0:100}}</p>
                                        </div>
                                    </div>
                                    <div *ngIf="j !== (ratings.length - 1)">
                                        <hr>
                                    </div>
                                </div>
                    
                            </tab-about-profile>
                        </tabs-about-profile>
                    </div>
                    <div class="row" *ngIf="aboutButton === 'following'">
                    
                        <!-- Grid Item -->
                        <div *ngFor="let user of following; index as i; first as isFirst" class="col-xl-4 col-md-4 col-sm-6 col-12">
                    
                        <!-- Card -->
                        <gx-grid>
                            <!-- User Avatar-->
                            <avatar img_class="dt-avatar size-60" src="{{user.profilePicture}}" firstName="{{user.firstName}}"></avatar>
                            <!-- /user avatar-->
                    
                            <div class="mt-7">
                                <h4 class="mb-1 mb-sm-0">{{user.firstName + ' ' + user.lastName}}</h4>
                                <span style="padding-top: 10px; padding-bottom: 10px;">{{user.city + ', ' + user.provinceState}}</span>
                                <div style="padding:10px;"></div>
                                <a href="portal/user/profile/{{user.id}}" class="btn btn-primary btn-sm">See Profile Page</a>
                              </div>
                        
                              <div class="action-tools">
                                <!-- Dropdown -->
                                <div *ngIf="currentUser !== null" placement="bottom-right">
                                <button *ngIf="user.id !== currentUser.id" type="button" class="btn btn-outline-secondary mb-2" [ngClass]="user.followed ? 'toggled_btn_follow' : ''"
                                        (click)="followUser(user)" aria-pressed="false"
                                        autocomplete="off">
                                        <div *ngIf="user.followed">Following</div>
                                        <div *ngIf="!user.followed">Follow</div>
                                </button>
                                </div>
                                <!-- /dropdown -->
                              </div>
                    
                        </gx-grid>
                        <!-- /Card -->
                    
                        </div>
                        <!-- /grid item -->
                    
                    </div>

                    <tabs-about-profile title="Posts" class="card">
                        <div>
                            <div class="tab-content">
                                <div *ngIf="posts.length == 0" style="margin-bottom: 30px;">
                                    No Posts Yet.
                                </div>
                                <div *ngFor="let post of posts; index as j;">
                                    <a href="portal/forum/forum-item/{{post.id}}">
                                        <div class="container row" [style]="j === (posts.length - 1) ? 'margin-bottom: 10px;' : ''">
                                            <p class="mb-0 text-light-gray text-truncate">{{ post.type }}</p>
                                            <div class="dt-module__list-item-content" data-location="mail-detail.html">
                                                <div class="user-detail">
                                                    <span class="dt-separator-v">&nbsp;</span>
                                                    <span class="designation date-designation">{{ post.datePosted | dateAgo }}</span>
                                                    <span class="dt-separator-v">&nbsp;</span>
                                                    <span class="designation date-designation">{{ post.subject }}</span>
                                                </div>
                                                <p class="mb-0 text-light-gray text-truncate">{{ post.message | htmlToPlainText | slice:0:100 }}</p>
                                            </div>
                                        </div>
                                    </a>
                                    <div *ngIf="j !== (posts.length - 1)">
                                        <hr>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </tabs-about-profile>

                    <!--
                    <gx-card card-title="Events">
                        <profile-events class="card shadow-none horizontal rounded-0" *ngFor="let event of data.events; let last = last" [event]="event" [ngClass]="last ? 'mb-0' :'pb-8 border-bottom'"  ></profile-events>
                    </gx-card>
                    -->
                </div>
            </div>
            <!-- /grid -->
        </div>
        <!-- /profile content -->
    </div>
</div>
<!-- /profile -->
